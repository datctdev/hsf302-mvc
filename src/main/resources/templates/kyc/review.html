<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.parameterName}">
    <title>Xem L·∫°i Th√¥ng Tin - eKYC</title>
    
    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
    
    <style>
        .review-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }
        
        .progress-bar-container {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 30px;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
        }
        
        .step {
            flex: 1;
            text-align: center;
            padding: 12px 15px;
            border-radius: 8px;
            background: #e9ecef;
            margin: 0 5px;
            font-weight: 600;
            font-size: 0.9rem;
            position: relative;
            z-index: 2;
            transition: all 0.3s ease;
        }
        
        .step.completed {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
        }
        
        .step.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.05);
        }
        
        .info-card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        
        .info-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        }
        
        .info-card-header {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 25px;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .info-card-header.front {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .info-card-header.back {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        .info-card-header i {
            font-size: 1.5rem;
            margin-right: 10px;
        }
        
        .info-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 15px;
        }
        
        .info-item {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .info-item label {
            font-weight: 700;
            color: #495057;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
            display: block;
        }
        
        .info-item p {
            margin: 0;
            font-size: 1rem;
            color: #212529;
            font-weight: 500;
        }
        
        .warning-box {
            background: linear-gradient(135deg, #fff3cd 0%, #ffe8a1 100%);
            border: 2px solid #ffc107;
            border-radius: 12px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .warning-box strong {
            color: #856404;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .warning-box strong::before {
            content: "‚ö†Ô∏è";
            font-size: 1.5rem;
            margin-right: 10px;
        }
        
        .warning-box p {
            color: #856404;
            margin: 10px 0 0 0;
            font-size: 0.95rem;
        }
        
        .action-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .btn-back {
            padding: 12px 30px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .btn-back:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
            color: white;
        }
        
        .btn-verify {
            padding: 14px 40px;
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }
        
        .btn-verify:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.5);
        }
        
        .alert {
            border-radius: 8px;
            padding: 15px 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .alert-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        
        .alert-danger {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        
        @media (max-width: 768px) {
            .info-row {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .btn-back, .btn-verify {
                width: 100%;
                text-align: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <th:block th:replace="~{fragments/header :: header-simple}"></th:block>
    
    <!-- Navigation -->
    <th:block th:replace="~{fragments/nav-home :: nav-home}"></th:block>
    
    <!-- Main Content -->
    <div class="main-content">
        <div class="review-container">
            <!-- Progress Bar -->
            <div class="progress-bar-container">
                <div class="progress-steps">
                    <div class="step completed">‚úì T·∫£i l√™n gi·∫•y t·ªù</div>
                    <div class="step active">üëÅÔ∏è Xem l·∫°i th√¥ng tin</div>
                    <div class="step">‚úÖ X√°c nh·∫≠n</div>
                </div>
            </div>
            
            <!-- Flash Messages -->
            <div th:if="${success}" class="alert alert-success">
                <span>‚úì</span>&nbsp;<span th:text="${success}"></span>
            </div>
            <div th:if="${error}" class="alert alert-danger">
                <span>‚úó</span>&nbsp;<span th:text="${error}"></span>
            </div>
            
            <!-- Front Card Info -->
            <div class="info-card" th:if="${frontInfo}">
                <div class="info-card-header front">
                    <i>ü™™</i>
                    <span>Th√¥ng Tin M·∫∑t Tr∆∞·ªõc CCCD</span>
                </div>
                <div class="info-row">
                    <div class="info-item">
                        <label>S·ªë CCCD</label>
                        <p th:text="${frontInfo.idNumber} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>H·ªç v√† T√™n</label>
                        <p th:text="${frontInfo.fullName} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>Ng√†y Sinh</label>
                        <p th:text="${frontInfo.birthDay} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>Gi·ªõi T√≠nh</label>
                        <p th:text="${frontInfo.gender} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>Qu·ªëc T·ªãch</label>
                        <p th:text="${frontInfo.nationality} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>Qu√™ Qu√°n</label>
                        <p th:text="${frontInfo.originLocation} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item" style="grid-column: 1 / -1;">
                        <label>N∆°i Th∆∞·ªùng Tr√∫</label>
                        <p th:text="${frontInfo.recentLocation} ?: 'N/A'"></p>
                    </div>
                </div>
            </div>
            
            <!-- Back Card Info (if available) -->
            <div class="info-card" th:if="${backInfo}">
                <div class="info-card-header back">
                    <i>ü™™</i>
                    <span>Th√¥ng Tin M·∫∑t Sau CCCD</span>
                </div>
                <div class="info-row">
                    <div class="info-item">
                        <label>Ng√†y C·∫•p</label>
                        <p th:text="${backInfo.issueDate} ?: 'N/A'"></p>
                    </div>
                    <div class="info-item">
                        <label>N∆°i C·∫•p</label>
                        <p th:text="${backInfo.issuePlace} ?: 'N/A'"></p>
                    </div>
                </div>
            </div>
            
            <!-- Warning Box -->
            <div class="warning-box">
                <strong>Vui l√≤ng ki·ªÉm tra k·ªπ th√¥ng tin tr∆∞·ªõc khi x√°c nh·∫≠n</strong>
                <p>Sau khi x√°c nh·∫≠n, h·ªá th·ªëng s·∫Ω so s√°nh khu√¥n m·∫∑t tr√™n CCCD v·ªõi ·∫£nh selfie c·ªßa b·∫°n ƒë·ªÉ ho√†n t·∫•t qu√° tr√¨nh x√°c minh danh t√≠nh.</p>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <a th:href="@{/kyc/session/{id}(id=${kycSession.id})}" class="btn-back">
                    ‚Üê Quay L·∫°i
                </a>
                <form th:action="@{/kyc/session/{id}/verify(id=${kycSession.id})}" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <button type="submit" class="btn-verify">
                        ‚úì X√°c Nh·∫≠n v√† X√°c Minh
                    </button>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>
    
    <!-- JavaScript -->
    <script th:src="@{/js/common.js}"></script>
</body>
</html>
