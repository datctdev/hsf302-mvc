<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chá»©c NÄƒng Äang PhÃ¡t Triá»ƒn - E-commerce</title>
    
    <!-- CSS -->
    <link rel="stylesheet" th:href="@{/css/base.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/components.css}">
</head>
<body>
    <!-- Admin Header (only show if admin) -->
    <header id="adminHeader" style="display: none;" class="admin-header">
        <div class="header-content">
            <h1 style="flex: 1; text-align: center;">ğŸ›’ Admin Dashboard - E-commerce Marketplace</h1>
            <div class="user-info" style="position: absolute; right: 1rem;">
                <span id="adminName">Admin</span>
                <button class="btn btn-danger" onclick="handleLogout()">ÄÄƒng xuáº¥t</button>
            </div>
        </div>
    </header>
    <nav id="adminNav" style="display: none;" class="nav-admin">
        <div class="nav-content">
            <a href="/admin/dashboard">Dashboard</a>
            <a href="/admin/seller-requests">YÃªu Cáº§u Seller</a>
            <a href="/admin/users">Quáº£n LÃ½ Users</a>
            <a href="/admin/products">Quáº£n LÃ½ Sáº£n Pháº©m</a>
            <a href="/admin/orders">Quáº£n LÃ½ ÄÆ¡n HÃ ng</a>
        </div>
    </nav>

    <!-- Simple Header (for non-admin pages) -->
    <header id="simpleHeader" style="display: none;">
        <h1>ChÃ o má»«ng Ä‘áº¿n vá»›i cá»­a hÃ ng E-commerce!</h1>
    </header>
    <nav id="simpleNav" class="nav-home" style="display: none;">
        <div class="nav-container">
            <div class="nav-main">
                <a href="/">Trang chá»§</a>
                <a href="/profile">Há»“ sÆ¡</a>
                <a href="/seller/shop" id="sellerShopLink" style="display: none;">Quáº£n LÃ½ Shop</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">
            <div class="coming-soon-section">
                <div class="coming-soon-icon">ğŸš§</div>
                <h2>Chá»©c NÄƒng Äang PhÃ¡t Triá»ƒn</h2>
                <p>Chá»©c nÄƒng nÃ y Ä‘ang Ä‘Æ°á»£c phÃ¡t triá»ƒn vÃ  sáº½ sá»›m cÃ³ máº·t trong cÃ¡c phiÃªn báº£n tiáº¿p theo.</p>
                <p style="color: #999; font-size: 0.9rem;">
                    ChÃºng tÃ´i Ä‘ang ná»— lá»±c Ä‘á»ƒ mang Ä‘áº¿n tráº£i nghiá»‡m tá»‘t nháº¥t cho báº¡n.
                </p>
                
                <div class="page-info">
                    <strong id="pageName">Chá»©c nÄƒng</strong>
                </div>

                <div class="features-list" id="featuresContainer" style="display: none;">
                    <h3>CÃ¡c tÃ­nh nÄƒng sáº½ Ä‘Æ°á»£c thÃªm vÃ o:</h3>
                    <ul id="featuresList">
                    </ul>
                </div>

                <div class="btn-group">
                    <a href="#" id="backButton" class="btn btn-primary">Quay Láº¡i</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <th:block th:replace="~{fragments/footer :: footer}"></th:block>

    <!-- JavaScript -->
    <script th:src="@{/js/common.js}"></script>
    <script>
        // Page features mapping
        const pageFeatures = {
            // Admin pages
            'admin-users': {
                name: 'Quáº£n LÃ½ Users',
                backUrl: '/admin/dashboard',
                features: [
                    'Xem danh sÃ¡ch táº¥t cáº£ ngÆ°á»i dÃ¹ng',
                    'TÃ¬m kiáº¿m vÃ  lá»c ngÆ°á»i dÃ¹ng',
                    'Xem chi tiáº¿t thÃ´ng tin ngÆ°á»i dÃ¹ng',
                    'KhÃ³a/Má»Ÿ khÃ³a tÃ i khoáº£n',
                    'PhÃ¢n quyá»n ngÆ°á»i dÃ¹ng',
                    'Xem lá»‹ch sá»­ hoáº¡t Ä‘á»™ng'
                ]
            },
            'admin-products': {
                name: 'Quáº£n LÃ½ Sáº£n Pháº©m',
                backUrl: '/admin/dashboard',
                features: [
                    'Xem danh sÃ¡ch táº¥t cáº£ sáº£n pháº©m',
                    'TÃ¬m kiáº¿m vÃ  lá»c sáº£n pháº©m',
                    'Xem chi tiáº¿t sáº£n pháº©m',
                    'Duyá»‡t/XÃ³a sáº£n pháº©m',
                    'Quáº£n lÃ½ danh má»¥c sáº£n pháº©m',
                    'Thá»‘ng kÃª sáº£n pháº©m'
                ]
            },
            'admin-orders': {
                name: 'Quáº£n LÃ½ ÄÆ¡n HÃ ng',
                backUrl: '/admin/dashboard',
                features: [
                    'Xem danh sÃ¡ch táº¥t cáº£ Ä‘Æ¡n hÃ ng',
                    'TÃ¬m kiáº¿m vÃ  lá»c Ä‘Æ¡n hÃ ng',
                    'Xem chi tiáº¿t Ä‘Æ¡n hÃ ng',
                    'Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng',
                    'Thá»‘ng kÃª doanh thu',
                    'Xuáº¥t bÃ¡o cÃ¡o'
                ]
            },
            // Seller pages
            'seller-products': {
                name: 'Quáº£n LÃ½ Sáº£n Pháº©m',
                backUrl: '/seller/shop',
                features: [
                    'ThÃªm sáº£n pháº©m má»›i',
                    'Chá»‰nh sá»­a thÃ´ng tin sáº£n pháº©m',
                    'XÃ³a sáº£n pháº©m',
                    'Quáº£n lÃ½ kho hÃ ng',
                    'Xem thá»‘ng kÃª sáº£n pháº©m',
                    'Tá»‘i Æ°u hÃ³a SEO'
                ]
            },
            'seller-orders': {
                name: 'Quáº£n LÃ½ ÄÆ¡n HÃ ng',
                backUrl: '/seller/shop',
                features: [
                    'Xem danh sÃ¡ch Ä‘Æ¡n hÃ ng',
                    'Cáº­p nháº­t tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng',
                    'In hÃ³a Ä‘Æ¡n',
                    'Thá»‘ng kÃª doanh thu',
                    'Xuáº¥t bÃ¡o cÃ¡o',
                    'Quáº£n lÃ½ váº­n chuyá»ƒn'
                ]
            },
            'seller-statistics': {
                name: 'Thá»‘ng KÃª',
                backUrl: '/seller/shop',
                features: [
                    'Thá»‘ng kÃª doanh thu',
                    'Thá»‘ng kÃª sáº£n pháº©m bÃ¡n cháº¡y',
                    'Thá»‘ng kÃª khÃ¡ch hÃ ng',
                    'Biá»ƒu Ä‘á»“ xu hÆ°á»›ng',
                    'Xuáº¥t bÃ¡o cÃ¡o',
                    'PhÃ¢n tÃ­ch hiá»‡u suáº¥t'
                ]
            }
        };

        document.addEventListener('DOMContentLoaded', async function() {
            // Get page identifier from URL
            const path = window.location.pathname;
            let pageKey = '';
            let isAdmin = false;

            if (path.startsWith('/admin/')) {
                isAdmin = true;
                if (path === '/admin/users') pageKey = 'admin-users';
                else if (path === '/admin/products') pageKey = 'admin-products';
                else if (path === '/admin/orders') pageKey = 'admin-orders';
            } else if (path.startsWith('/seller/')) {
                if (path === '/seller/products') pageKey = 'seller-products';
                else if (path === '/seller/orders') pageKey = 'seller-orders';
                else if (path === '/seller/statistics') pageKey = 'seller-statistics';
            }

            // Show appropriate header/nav
            if (isAdmin) {
                document.getElementById('adminHeader').style.display = 'block';
                document.getElementById('adminNav').style.display = 'block';
                
                // Load admin info
                const token = AuthUtils.getToken();
                if (token) {
                    try {
                        const response = await AuthUtils.fetchWithAuth('/api/auth/me');
                        if (response.ok) {
                            const user = await response.json();
                            document.getElementById('adminName').textContent = user.fullName || user.email;
                        }
                    } catch (error) {
                        // Ignore
                    }
                }
            } else {
                document.getElementById('simpleHeader').style.display = 'block';
                document.getElementById('simpleNav').style.display = 'block';
                
                // Check if seller and show seller shop link
                const token = AuthUtils.getToken();
                if (token) {
                    try {
                        const response = await AuthUtils.fetchWithAuth('/api/auth/me');
                        if (response.ok) {
                            const user = await response.json();
                            const roles = user.roles || [];
                            if (roles.includes('ROLE_SELLER')) {
                                document.getElementById('sellerShopLink').style.display = 'inline-block';
                            }
                        }
                    } catch (error) {
                        // Ignore
                    }
                }
            }

            // Load page info
            if (pageKey && pageFeatures[pageKey]) {
                const pageInfo = pageFeatures[pageKey];
                document.getElementById('pageName').textContent = pageInfo.name;
                document.getElementById('backButton').href = pageInfo.backUrl;

                if (pageInfo.features && pageInfo.features.length > 0) {
                    const featuresList = document.getElementById('featuresList');
                    pageInfo.features.forEach(feature => {
                        const li = document.createElement('li');
                        li.textContent = feature;
                        featuresList.appendChild(li);
                    });
                    document.getElementById('featuresContainer').style.display = 'block';
                }
            } else {
                document.getElementById('pageName').textContent = 'Chá»©c nÄƒng';
                document.getElementById('backButton').href = '/';
            }
        });
    </script>
</body>
</html>
